# Kubernetes (K8s)

ĞŸĞ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ñ€Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ, Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸ÑĞ¼Ğ¸.

---

## â˜¸ï¸ Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ Kubernetes

**Kubernetes (K8s)** - ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ² Ñ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ğ¼ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¼ ĞºĞ¾Ğ´Ğ¾Ğ¼, Ğ¸Ğ·Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ¾ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ½Ğ°Ñ Google.

### Ğ—Ğ°Ñ‡ĞµĞ¼ Ğ½ÑƒĞ¶ĞµĞ½ Kubernetes

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ¿Ñ€Ğ¸ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¼ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°Ğ¼Ğ¸:**
- ĞšĞ°Ğº Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ 100 ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ² Ğ½Ğ° 10 ÑĞµÑ€Ğ²ĞµÑ€Ğ°Ñ…?
- Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ ĞµÑĞ»Ğ¸ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ ÑƒĞ¿Ğ°Ğ»?
- ĞšĞ°Ğº Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ¸Ğ¸ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸?
- ĞšĞ°Ğº Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑÑ‚ÑŒ Ğ±ĞµĞ· downtime?
- ĞšĞ°Ğº Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ÑÑ‚ÑŒ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ?

**Kubernetes Ñ€ĞµÑˆĞ°ĞµÑ‚:**
- âœ… **Orchestration** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ñ€Ğ°Ğ·Ğ¼ĞµÑ‰ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
- âœ… **Self-healing** - Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº ÑƒĞ¿Ğ°Ğ²ÑˆĞ¸Ñ… ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
- âœ… **Auto-scaling** - Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- âœ… **Rolling updates** - Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ±ĞµĞ· downtime
- âœ… **Load balancing** - Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
- âœ… **Service discovery** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
- âœ… **Secret & config management** - ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸ĞµĞ¹

### Docker Swarm vs Kubernetes

| Feature | Docker Swarm | Kubernetes |
|---------|--------------|------------|
| Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ | ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ | Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğ¹ |
| Learning curve | ĞĞ¸Ğ·ĞºĞ°Ñ | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ |
| ĞœĞ°ÑÑˆÑ‚Ğ°Ğ± | ĞĞµĞ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹/ÑÑ€ĞµĞ´Ğ½Ğ¸Ğ¹ | Ğ›ÑĞ±Ğ¾Ğ¹ |
| Ecosystem | ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¹ | ĞĞ³Ñ€Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ |
| Auto-scaling | Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ | ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ (HPA) |
| Self-healing | Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ | ĞŸÑ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚Ñ‹Ğ¹ |
| Community | ĞœĞµĞ½ÑŒÑˆĞµ | ĞĞ³Ñ€Ğ¾Ğ¼Ğ½Ğ¾Ğµ |
| Use case | ĞŸÑ€Ğ¾ÑÑ‚Ñ‹Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñ‹ | Production-grade |

---

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Kubernetes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Kubernetes Cluster                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              Control Plane (Master)              â”‚      â”‚
â”‚  â”‚                                                  â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚      â”‚
â”‚  â”‚  â”‚ API Server   â”‚  â”‚  Scheduler   â”‚            â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚      â”‚
â”‚  â”‚                                                  â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚      â”‚
â”‚  â”‚  â”‚   etcd       â”‚  â”‚  Controller  â”‚            â”‚      â”‚
â”‚  â”‚  â”‚ (key-value)  â”‚  â”‚   Manager    â”‚            â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                           â”‚                                 â”‚
â”‚                           â”‚ kubectl commands                â”‚
â”‚                           â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                Worker Nodes                      â”‚      â”‚
â”‚  â”‚                                                  â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
â”‚  â”‚  â”‚   Node 1    â”‚  â”‚   Node 2    â”‚  â”‚  Node 3 â”‚ â”‚      â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚         â”‚ â”‚      â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚â”Œâ”€â”€â”€â”€â”€â”€â” â”‚ â”‚      â”‚
â”‚  â”‚  â”‚ â”‚  Pod 1  â”‚ â”‚  â”‚ â”‚  Pod 3  â”‚ â”‚  â”‚â”‚ Pod 5â”‚ â”‚ â”‚      â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚â””â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚      â”‚
â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚         â”‚ â”‚      â”‚
â”‚  â”‚  â”‚ â”‚  Pod 2  â”‚ â”‚  â”‚ â”‚  Pod 4  â”‚ â”‚  â”‚         â”‚ â”‚      â”‚
â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚         â”‚ â”‚      â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚         â”‚ â”‚      â”‚
â”‚  â”‚  â”‚  kubelet    â”‚  â”‚  kubelet    â”‚  â”‚ kubelet â”‚ â”‚      â”‚
â”‚  â”‚  â”‚  kube-proxy â”‚  â”‚  kube-proxy â”‚  â”‚kube-proxyâ”‚ â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Control Plane Components

**1. API Server (kube-apiserver)**
- REST API Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
- Frontend Ğ´Ğ»Ñ Kubernetes
- Ğ’ÑĞµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ğ¾Ğ±Ñ‰Ğ°ÑÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· API Server

**2. etcd**
- Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ğ¾Ğµ key-value Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ
- Ğ¥Ñ€Ğ°Ğ½Ğ¸Ñ‚ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ° (desired state)
- Highly available

**3. Scheduler (kube-scheduler)**
- Ğ ĞµÑˆĞ°ĞµÑ‚, Ğ½Ğ° ĞºĞ°ĞºÑƒÑ node Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ pod
- Ğ£Ñ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ€ĞµÑÑƒÑ€ÑÑ‹ (CPU, RAM), constraints, affinity

**4. Controller Manager (kube-controller-manager)**
- Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ñ‹ (control loops)
- Ğ¡Ğ»ĞµĞ´Ğ¸Ñ‚ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ actual state = desired state
- ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹: ReplicaSet Controller, Deployment Controller

### Node Components

**1. kubelet**
- ĞĞ³ĞµĞ½Ñ‚ Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ node
- Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ pods
- Ğ¡Ğ»ĞµĞ´Ğ¸Ñ‚ Ğ·Ğ° Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµĞ¼ pods
- ĞĞ±Ñ‰Ğ°ĞµÑ‚ÑÑ Ñ API Server

**2. kube-proxy**
- Network proxy Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ node
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞµÑ‚ĞµĞ²Ñ‹Ğ¼Ğ¸ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°Ğ¼Ğ¸
- Ğ ĞµĞ°Ğ»Ğ¸Ğ·ÑƒĞµÑ‚ Service abstraction

**3. Container Runtime**
- Docker, containerd, CRI-O
- Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹

---

## ğŸ¯ ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ğ¸

### Pod

**Pod** - Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞµĞ´Ğ¸Ğ½Ğ¸Ñ†Ğ° Ñ€Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ Ğ² K8s, Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ° Ğ¸Ğ· Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ»Ğ¸ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ².

```yaml
# pod.yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx-pod
  labels:
    app: nginx
spec:
  containers:
  - name: nginx
    image: nginx:1.21
    ports:
    - containerPort: 80
```

**Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸:**
- ĞĞ´Ğ¸Ğ½ pod = Ğ¾Ğ´Ğ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ (Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ 1 ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€)
- ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ğ² pod Ğ´ĞµĞ»ÑÑ‚ network namespace (localhost)
- ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ğ² pod Ğ´ĞµĞ»ÑÑ‚ storage volumes
- Pod = ephemeral (Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½ Ğ¸ Ğ¿ĞµÑ€ĞµÑĞ¾Ğ·Ğ´Ğ°Ğ½)

**Multi-container pod:**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: app-pod
spec:
  containers:
  - name: app
    image: my-app:1.0
    ports:
    - containerPort: 8000
  - name: sidecar-logger
    image: logger:1.0
    volumeMounts:
    - name: logs
      mountPath: /var/log
  volumes:
  - name: logs
    emptyDir: {}
```

### ReplicaSet

**ReplicaSet** - Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ½Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ€ĞµĞ¿Ğ»Ğ¸Ğº pod.

```yaml
# replicaset.yaml
apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: nginx-replicaset
spec:
  replicas: 3  # Ğ’ÑĞµĞ³Ğ´Ğ° 3 ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€Ğ°
  selector:
    matchLabels:
      app: nginx
  template:  # Pod template
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.21
        ports:
        - containerPort: 80
```

**Self-healing:**
```
Desired: 3 pods
Actual: 3 pods  âœ…

Pod 2 crashes âŒ
Actual: 2 pods

ReplicaSet Controller Ğ²Ğ¸Ğ´Ğ¸Ñ‚:
  Desired (3) != Actual (2)
  
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Pod 4
Actual: 3 pods  âœ…
```

### Deployment

**Deployment** - Ğ´ĞµĞºĞ»Ğ°Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ pods Ğ¸ ReplicaSets.

```yaml
# deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: laravel-app
  labels:
    app: laravel
spec:
  replicas: 3
  selector:
    matchLabels:
      app: laravel
  template:
    metadata:
      labels:
        app: laravel
    spec:
      containers:
      - name: laravel
        image: my-laravel-app:1.0
        ports:
        - containerPort: 9000
        env:
        - name: APP_ENV
          value: production
        - name: DB_HOST
          value: mysql-service
```

**Rolling Update:**
```bash
# ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ°
kubectl set image deployment/laravel-app laravel=my-laravel-app:2.0

# ĞŸÑ€Ğ¾Ñ†ĞµÑÑ:
# 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ½Ğ¾Ğ²Ñ‹Ğµ pods Ñ Ğ²ĞµÑ€ÑĞ¸ĞµĞ¹ 2.0
# 2. Ğ–Ğ´Ñ‘Ñ‚ Ğ¿Ğ¾ĞºĞ° Ğ½Ğ¾Ğ²Ñ‹Ğµ pods ÑÑ‚Ğ°Ğ½ÑƒÑ‚ Ready
# 3. Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ ÑÑ‚Ğ°Ñ€Ñ‹Ğµ pods Ñ Ğ²ĞµÑ€ÑĞ¸ĞµĞ¹ 1.0
# 4. ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€ÑĞµÑ‚ Ğ¿Ğ¾ĞºĞ° Ğ²ÑĞµ pods Ğ½Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ñ‹

# Zero downtime! âœ…
```

**Rollback:**
```bash
# ĞÑ‚ĞºĞ°Ñ‚Ğ¸Ñ‚ÑŒÑÑ Ğº Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸
kubectl rollout undo deployment/laravel-app

# Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ
kubectl rollout history deployment/laravel-app

# ĞÑ‚ĞºĞ°Ñ‚ Ğº ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ Ñ€ĞµĞ²Ğ¸Ğ·Ğ¸Ğ¸
kubectl rollout undo deployment/laravel-app --to-revision=2
```

### Service

**Service** - Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº pods, load balancing.

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° Ğ±ĞµĞ· Service:**
- Pods Ğ¸Ğ¼ĞµÑÑ‚ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ IP
- Pods Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ¿ĞµÑ€ĞµÑĞ¾Ğ·Ğ´Ğ°Ğ½Ñ‹ Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼ IP
- ĞšĞ°Ğº Ğ¾Ğ±Ñ€Ğ°Ñ‰Ğ°Ñ‚ÑŒÑÑ Ğº Ğ³Ñ€ÑƒĞ¿Ğ¿Ğµ pods?

**Service Ñ€ĞµÑˆĞ°ĞµÑ‚:**
- ĞŸĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ñ‹Ğ¹ IP Ğ¸ DNS Ğ¸Ğ¼Ñ
- Load balancing Ğ¼ĞµĞ¶Ğ´Ñƒ pods
- Service discovery

#### ClusterIP (default)

**Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°.**

```yaml
# service-clusterip.yaml
apiVersion: v1
kind: Service
metadata:
  name: laravel-service
spec:
  type: ClusterIP
  selector:
    app: laravel  # Pods Ñ ÑÑ‚Ğ¸Ğ¼ label
  ports:
  - port: 80       # Service port
    targetPort: 9000  # Pod port
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         laravel-service            â”‚
â”‚         ClusterIP: 10.0.0.5        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ Load balancing
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼        â–¼        â–¼
 â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
 â”‚Pod 1â”‚ â”‚Pod 2â”‚ â”‚Pod 3â”‚
 â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜
```

#### NodePort

**Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğ¸Ğ·Ğ²Ğ½Ğµ Ñ‡ĞµÑ€ĞµĞ· Ğ¿Ğ¾Ñ€Ñ‚ Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ node.**

```yaml
# service-nodeport.yaml
apiVersion: v1
kind: Service
metadata:
  name: laravel-nodeport
spec:
  type: NodePort
  selector:
    app: laravel
  ports:
  - port: 80
    targetPort: 9000
    nodePort: 30080  # 30000-32767
```

**Ğ”Ğ¾ÑÑ‚ÑƒĞ¿:**
```
http://<NodeIP>:30080
```

#### LoadBalancer

**Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ load balancer (AWS ELB, GCP LB).**

```yaml
# service-loadbalancer.yaml
apiVersion: v1
kind: Service
metadata:
  name: laravel-lb
spec:
  type: LoadBalancer
  selector:
    app: laravel
  ports:
  - port: 80
    targetPort: 9000
```

**Cloud provider ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚:**
- External Load Balancer
- ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ IP
- ĞĞ°Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ‚Ñ€Ğ°Ñ„Ğ¸Ğº Ğ½Ğ° nodes

### Ingress

**Ingress** - HTTP(S) routing Ğ² ÑĞµÑ€Ğ²Ğ¸ÑÑ‹, ĞµĞ´Ğ¸Ğ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°.

```yaml
# ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: laravel-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  rules:
  - host: example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: laravel-service
            port:
              number: 80
  - host: api.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: api-service
            port:
              number: 80
```

**Ğ¡ TLS:**
```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: laravel-ingress-tls
spec:
  tls:
  - hosts:
    - example.com
    secretName: tls-secret
  rules:
  - host: example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: laravel-service
            port:
              number: 80
```

**Ingress Controller:**
```bash
# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Nginx Ingress Controller
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.8.0/deploy/static/provider/cloud/deploy.yaml
```

---

## ğŸ“¦ ConfigMap Ğ¸ Secret

### ConfigMap

**ConfigMap** - Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ (Ğ½Ğµ ÑĞµĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹).

```yaml
# configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  APP_ENV: production
  APP_DEBUG: "false"
  LOG_LEVEL: info
  app.conf: |
    server {
      listen 80;
      server_name example.com;
    }
```

**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Pod:**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: laravel-pod
spec:
  containers:
  - name: laravel
    image: my-laravel-app:1.0
    envFrom:
    - configMapRef:
        name: app-config
    # Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ:
    env:
    - name: APP_ENV
      valueFrom:
        configMapKeyRef:
          name: app-config
          key: APP_ENV
```

### Secret

**Secret** - Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (base64 encoded).

```yaml
# secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: db-secret
type: Opaque
data:
  DB_PASSWORD: c2VjcmV0cGFzc3dvcmQ=  # base64 encoded
  API_KEY: YWJjMTIzNDU2Nzg5  # base64 encoded
```

**Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Secret Ñ‡ĞµÑ€ĞµĞ· kubectl:**
```bash
# Ğ˜Ğ· literal
kubectl create secret generic db-secret \
  --from-literal=DB_PASSWORD=secretpassword \
  --from-literal=API_KEY=abc123456789

# Ğ˜Ğ· Ñ„Ğ°Ğ¹Ğ»Ğ°
kubectl create secret generic db-secret \
  --from-file=password.txt

# TLS secret
kubectl create secret tls tls-secret \
  --cert=path/to/cert.pem \
  --key=path/to/key.pem
```

**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: laravel-pod
spec:
  containers:
  - name: laravel
    image: my-laravel-app:1.0
    env:
    - name: DB_PASSWORD
      valueFrom:
        secretKeyRef:
          name: db-secret
          key: DB_PASSWORD
```

---

## ğŸ’¾ Volumes Ğ¸ PersistentVolume

### emptyDir

**Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ, ÑƒĞ´Ğ°Ğ»ÑĞµÑ‚ÑÑ Ñ pod.**

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: pod-with-emptydir
spec:
  containers:
  - name: app
    image: my-app
    volumeMounts:
    - name: cache
      mountPath: /var/cache
  volumes:
  - name: cache
    emptyDir: {}
```

### hostPath

**ĞœĞ¾Ğ½Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ node.**

```yaml
volumes:
- name: data
  hostPath:
    path: /data
    type: Directory
```

### PersistentVolume (PV) Ğ¸ PersistentVolumeClaim (PVC)

**PV** - Ñ€ĞµÑÑƒÑ€Ñ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğ° Ğ² ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğµ (admin ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚).
**PVC** - Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ (user Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚).

```yaml
# persistentvolume.yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: mysql-pv
spec:
  capacity:
    storage: 10Gi
  accessModes:
  - ReadWriteOnce
  persistentVolumeReclaimPolicy: Retain
  storageClassName: standard
  hostPath:
    path: /data/mysql
```

```yaml
# persistentvolumeclaim.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mysql-pvc
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
  storageClassName: standard
```

**Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ PVC:**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: mysql-pod
spec:
  containers:
  - name: mysql
    image: mysql:8.0
    volumeMounts:
    - name: mysql-storage
      mountPath: /var/lib/mysql
  volumes:
  - name: mysql-storage
    persistentVolumeClaim:
      claimName: mysql-pvc
```

---

## ğŸ“Š Horizontal Pod Autoscaler (HPA)

**HPA** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ pods Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº.

```yaml
# hpa.yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: laravel-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: laravel-app
  minReplicas: 2
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70  # 70% CPU
```

**ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚:**
```
1. Metrics Server ÑĞ¾Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (CPU, RAM)
2. HPA Controller Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 15 ÑĞµĞº
3. Ğ•ÑĞ»Ğ¸ CPU > 70%:
   - Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ replicas (Ğ´Ğ¾ maxReplicas)
4. Ğ•ÑĞ»Ğ¸ CPU < 70%:
   - Ğ£Ğ¼ĞµĞ½ÑŒÑˆĞ¸Ñ‚ÑŒ replicas (Ğ´Ğ¾ minReplicas)
```

**Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Metrics Server:**
```bash
kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
```

---

## ğŸ® kubectl - Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

### Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ°Ğ¼Ğ¸

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¸Ğ· Ñ„Ğ°Ğ¹Ğ»Ğ°
kubectl apply -f deployment.yaml
kubectl apply -f .  # Ğ²ÑĞµ yaml Ğ² Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸

# Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ
kubectl delete -f deployment.yaml
kubectl delete deployment laravel-app
kubectl delete pod nginx-pod

# ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº
kubectl get pods
kubectl get deployments
kubectl get services
kubectl get nodes

# Ğ¡ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹
kubectl get pods -o wide
kubectl get pods -o yaml
kubectl get pods -o json

# Watch (Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸)
kubectl get pods -w

# Ğ’ÑĞµ Ñ€ĞµÑÑƒÑ€ÑÑ‹
kubectl get all

# Ğ’ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ğ¾Ğ¼ namespace
kubectl get pods -n kube-system

# Ğ’ÑĞµ namespaces
kubectl get pods --all-namespaces
kubectl get pods -A
```

### ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹

```bash
# Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ Ñ€ĞµÑÑƒÑ€ÑĞ°
kubectl describe pod nginx-pod
kubectl describe deployment laravel-app
kubectl describe service laravel-service

# Ğ›Ğ¾Ğ³Ğ¸ pod
kubectl logs nginx-pod
kubectl logs nginx-pod -f  # follow
kubectl logs nginx-pod --tail=100
kubectl logs nginx-pod -c container-name  # multi-container pod

# Ğ›Ğ¾Ğ³Ğ¸ Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ° (Ğ¿Ğ¾ÑĞ»Ğµ crash)
kubectl logs nginx-pod --previous
```

### Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´

```bash
# Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ Ğ² pod
kubectl exec nginx-pod -- ls -la
kubectl exec nginx-pod -- cat /etc/nginx/nginx.conf

# Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ shell
kubectl exec -it nginx-pod -- bash
kubectl exec -it nginx-pod -- sh

# Ğ’ multi-container pod
kubectl exec -it pod-name -c container-name -- bash
```

### ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

```bash
# Ğ˜Ğ· pod Ğ½Ğ° Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½ÑƒÑ Ğ¼Ğ°ÑˆĞ¸Ğ½Ñƒ
kubectl cp nginx-pod:/var/log/nginx/access.log ./access.log

# ĞĞ° pod
kubectl cp ./config.php nginx-pod:/var/www/html/config.php
```

### ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

```bash
# Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ replicas
kubectl scale deployment laravel-app --replicas=5

# Autoscale
kubectl autoscale deployment laravel-app --min=2 --max=10 --cpu-percent=70
```

### ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ

```bash
# ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ·
kubectl set image deployment/laravel-app laravel=my-laravel-app:2.0

# Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ rollout
kubectl rollout status deployment/laravel-app

# Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ
kubectl rollout history deployment/laravel-app

# ĞÑ‚ĞºĞ°Ñ‚
kubectl rollout undo deployment/laravel-app
kubectl rollout undo deployment/laravel-app --to-revision=2

# ĞŸĞ°ÑƒĞ·Ğ°/Ğ²Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ rollout
kubectl rollout pause deployment/laravel-app
kubectl rollout resume deployment/laravel-app
```

### Port forwarding

```bash
# ĞŸÑ€Ğ¾Ğ±Ñ€Ğ¾Ñ Ğ¿Ğ¾Ñ€Ñ‚Ğ° Ğ¸Ğ· pod Ğ½Ğ° Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½ÑƒÑ Ğ¼Ğ°ÑˆĞ¸Ğ½Ñƒ
kubectl port-forward pod/nginx-pod 8080:80
# Ğ¢ĞµĞ¿ĞµÑ€ÑŒ http://localhost:8080 â†’ pod:80

kubectl port-forward service/laravel-service 8000:80
```

### Namespaces

```bash
# Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº namespaces
kubectl get namespaces

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ namespace
kubectl create namespace production

# Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ namespace
kubectl delete namespace production

# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ default namespace
kubectl config set-context --current --namespace=production
```

### ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ¸ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ñ‹

```bash
# Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚
kubectl config current-context

# Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²
kubectl config get-contexts

# ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚
kubectl config use-context minikube
kubectl config use-context production-cluster

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
kubectl config view
```

---

## ğŸš€ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Laravel Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ² K8s

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
k8s/
â”œâ”€â”€ deployment.yaml
â”œâ”€â”€ service.yaml
â”œâ”€â”€ ingress.yaml
â”œâ”€â”€ configmap.yaml
â”œâ”€â”€ secret.yaml
â””â”€â”€ mysql/
    â”œâ”€â”€ deployment.yaml
    â”œâ”€â”€ service.yaml
    â””â”€â”€ pvc.yaml
```

### MySQL

```yaml
# k8s/mysql/pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mysql-pvc
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
---
# k8s/mysql/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mysql
spec:
  replicas: 1
  selector:
    matchLabels:
      app: mysql
  template:
    metadata:
      labels:
        app: mysql
    spec:
      containers:
      - name: mysql
        image: mysql:8.0
        env:
        - name: MYSQL_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysql-secret
              key: password
        - name: MYSQL_DATABASE
          value: laravel
        ports:
        - containerPort: 3306
        volumeMounts:
        - name: mysql-storage
          mountPath: /var/lib/mysql
      volumes:
      - name: mysql-storage
        persistentVolumeClaim:
          claimName: mysql-pvc
---
# k8s/mysql/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: mysql
spec:
  selector:
    app: mysql
  ports:
  - port: 3306
    targetPort: 3306
  clusterIP: None  # Headless service
```

### Laravel App

```yaml
# k8s/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: laravel-secret
type: Opaque
data:
  APP_KEY: base64_encoded_key
  DB_PASSWORD: base64_encoded_password
---
# k8s/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: laravel-config
data:
  APP_ENV: production
  APP_DEBUG: "false"
  DB_CONNECTION: mysql
  DB_HOST: mysql
  DB_PORT: "3306"
  DB_DATABASE: laravel
  CACHE_DRIVER: redis
  QUEUE_CONNECTION: redis
  REDIS_HOST: redis
---
# k8s/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: laravel-app
  labels:
    app: laravel
spec:
  replicas: 3
  selector:
    matchLabels:
      app: laravel
  template:
    metadata:
      labels:
        app: laravel
    spec:
      initContainers:
      - name: migrations
        image: my-laravel-app:latest
        command: ['php', 'artisan', 'migrate', '--force']
        envFrom:
        - configMapRef:
            name: laravel-config
        env:
        - name: APP_KEY
          valueFrom:
            secretKeyRef:
              name: laravel-secret
              key: APP_KEY
        - name: DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: laravel-secret
              key: DB_PASSWORD
      containers:
      - name: laravel
        image: my-laravel-app:latest
        ports:
        - containerPort: 9000
        envFrom:
        - configMapRef:
            name: laravel-config
        env:
        - name: APP_KEY
          valueFrom:
            secretKeyRef:
              name: laravel-secret
              key: APP_KEY
        - name: DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: laravel-secret
              key: DB_PASSWORD
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /health
            port: 9000
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /ready
            port: 9000
          initialDelaySeconds: 5
          periodSeconds: 5
---
# k8s/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: laravel-service
spec:
  selector:
    app: laravel
  ports:
  - port: 80
    targetPort: 9000
  type: ClusterIP
---
# k8s/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: laravel-ingress
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
spec:
  tls:
  - hosts:
    - example.com
    secretName: laravel-tls
  rules:
  - host: example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: laravel-service
            port:
              number: 80
---
# k8s/hpa.yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: laravel-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: laravel-app
  minReplicas: 3
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
```

### Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ namespace
kubectl create namespace production

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ secrets
kubectl create secret generic mysql-secret \
  --from-literal=password=secretpassword \
  -n production

kubectl create secret generic laravel-secret \
  --from-literal=APP_KEY=base64:... \
  --from-literal=DB_PASSWORD=secretpassword \
  -n production

# ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ°Ğ½Ğ¸Ñ„ĞµÑÑ‚Ñ‹
kubectl apply -f k8s/ -n production

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°
kubectl get all -n production
kubectl get pods -n production -w

# Ğ›Ğ¾Ğ³Ğ¸
kubectl logs -f deployment/laravel-app -n production

# Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
kubectl port-forward service/laravel-service 8000:80 -n production
# http://localhost:8000
```

---

## ğŸ“ Ğ”Ğ»Ñ ÑĞ¾Ğ±ĞµÑĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ: ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ‚Ğ¾Ñ‡ĞºĞ¸

1. **ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°** - Control Plane (API Server, etcd, Scheduler, Controller Manager) + Worker Nodes (kubelet, kube-proxy, container runtime)
2. **Pod** - Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞµĞ´Ğ¸Ğ½Ğ¸Ñ†Ğ°, Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ»Ğ¸ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ², ephemeral, ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ğ² pod Ğ´ĞµĞ»ÑÑ‚ network/storage
3. **Deployment** - ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ReplicaSets Ğ¸ Pods, rolling updates, rollback, declarative updates
4. **Service** - Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº pods, ClusterIP (Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°), NodePort (Ğ½Ğ° node), LoadBalancer (external LB)
5. **Ingress** - HTTP(S) routing, ĞµĞ´Ğ¸Ğ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°, SSL/TLS termination, host-based/path-based routing
6. **ConfigMap/Secret** - ConfigMap Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ (Ğ½Ğµ ÑĞµĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹), Secret Ğ´Ğ»Ñ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (base64)
7. **PV/PVC** - PersistentVolume (admin ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ storage), PersistentVolumeClaim (user Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚), Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸
8. **HPA** - Horizontal Pod Autoscaler, Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ CPU/RAM, minReplicas/maxReplicas
9. **kubectl** - CLI Ğ´Ğ»Ñ K8s, apply/get/describe/logs/exec, rolling update (set image), rollback (rollout undo)
10. **Self-healing** - ĞµÑĞ»Ğ¸ pod ÑƒĞ¿Ğ°Ğ», ReplicaSet Controller ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ½Ğ¾Ğ²Ñ‹Ğ¹, desired state vs actual state

**Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ:** ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñƒ (master/worker nodes), Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ñƒ Pod/ReplicaSet/Deployment, Service Ğ´Ğ»Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº pods (Ñ‚Ğ¸Ğ¿Ñ‹ ClusterIP/NodePort/LoadBalancer), Ingress Ğ´Ğ»Ñ HTTP routing, Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (HPA), declarative configuration Ñ‡ĞµÑ€ĞµĞ· YAML Ğ¼Ğ°Ğ½Ğ¸Ñ„ĞµÑÑ‚Ñ‹.
